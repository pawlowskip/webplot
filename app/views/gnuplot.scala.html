@()(implicit flash:Flash, messages: Messages )

@main("Welcome to Play", 0) {

<div class="container-fluid content">

    <div class="row">
        <div class="tab-content">
            <div ng-show="!plt.isAnyProjectLoaded()">
                <h2 class="text-center">Select or create new project.</h2>
            </div>
            <div ng-repeat="graph in plt.graphs" id="tab-{{$index}}" class="tab-pane fade in {{$index == 0 ? 'active' : ''}}">
                        <div class="col-sm-3">
                            <button ng-click="plt.newPlotInGraph($index)" type="button" class="btn btn-primary btn-block">New Plot</button>
                            <div class="full-page">

                                <div class="panel panel-default" id="plotPanel{{$index}}">
                                    <div ng-repeat="plot in graph.plots" class="panel-heading" id="plotPanel{{$parent.$index + '-' + $index}}">
                                        <button ng-click="plt.removePlotFromGraph($index, $parent.$index)" type="button" name="remove" class="btn btn-primary btn-block btn-xs">
                                            <span class="glyphicon glyphicon-remove"></span> Remove
                                        </button>

                                        <div ng-show="plt.graphs[$parent.$index].graphType != 'HIST'">

                                            <div class="panel panel-default">

                                                <input ng-model="plt.graphs[$parent.$index].plots[$index].label" type="label" class="form-control"  placeholder="Label">
                                                <div ng-show="plt.graphs[$parent.$index].graphType == '2D'" class="plot-type-bar">
                                                    <ul class="nav nav-pills nav-justified">
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'lines' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'lines')" ><img data-toggle="tooltip" data-placement="top" title="lines" src='@{routes.Assets.versioned("images/icons/ico_lines.png")}'></a></li>
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'points' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'points')" ><img data-toggle="tooltip" data-placement="top" title="points" src='@{routes.Assets.versioned("images/icons/ico_points.png")}'></a></li>
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'linespoints' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'linespoints')" ><img data-toggle="tooltip" data-placement="top" title="lines and points" src='@{routes.Assets.versioned("images/icons/ico_linespoints.png")}'></a></li>
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'filledcurve' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'filledcurve')" ><img data-toggle="tooltip" data-placement="top" title="filled curve" src='@{routes.Assets.versioned("images/icons/ico_filledcurve.png")}'></a></li>
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'xerrorbars' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'xerrorbars')" ><img data-toggle="tooltip" data-placement="top" title="x-error bars" src='@{routes.Assets.versioned("images/icons/ico_xerror.png")}'></a></li>
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'yerrorbars' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'yerrorbars')" ><img data-toggle="tooltip" data-placement="top" title="y-error bars" src='@{routes.Assets.versioned("images/icons/ico_yerror.png")}'></a></li>
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'xyerrorbars' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'xyerrorbars')" ><img data-toggle="tooltip" data-placement="top" title="xy-errorbars" src='@{routes.Assets.versioned("images/icons/ico_xyerror.png")}'></a></li>
                                                    </ul>
                                                </div>
                                                <div ng-show="plt.graphs[$parent.$index].graphType == '3D'" class="plot-type-bar">
                                                    <ul class="nav nav-pills nav-justified">
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'lines' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'lines')" ><img data-toggle="tooltip" data-placement="top" title="lines" src='@{routes.Assets.versioned("images/icons/ico_lines.png")}'></a></li>
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'points' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'points')" ><img data-toggle="tooltip" data-placement="top" title="points" src='@{routes.Assets.versioned("images/icons/ico_points.png")}'></a></li>
                                                        <li ng-class="plt.graphs[$parent.$index].plots[$index].plotType == 'linespoints' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changePlotType($parent.$index, $index, 'linespoints')" ><img data-toggle="tooltip" data-placement="top" title="lines and points" src='@{routes.Assets.versioned("images/icons/ico_linespoints.png")}'></a></li>
                                                    </ul>
                                                </div>


                                                <ul class="nav nav-pills nav-justified">
                                                    <!--ng-class="{active : plt.graphs[$parent.$index].plots[$index].type === 'd'}"-->
                                                    <li ng-hide="plt.graphs[$parent.$index].plots[$index].plotType.indexOf('error') > -1" ng-class="{f:'active', d:''}[plt.graphs[$parent.$index].plots[$index].plotDataType]" ><a data-toggle="pill" ng-click="plt.changePlotDataType($parent.$index, $index, 'f')" >Function</a></li>
                                                    <li ng-class="{d:'active', f:''}[plt.graphs[$parent.$index].plots[$index].plotDataType]"><a data-toggle="pill" ng-click="plt.changePlotDataType($parent.$index, $index, 'd')" >&nbsp;Data set&nbsp;&nbsp;</a></li>
                                                </ul>

                                                <div class="tab-content">
                                                    <div ng-class="{f:'tab-pane active', d:'tab-pane'}[plt.graphs[$parent.$index].plots[$index].plotDataType]">
                                                        <input ng-model="plt.graphs[$parent.$index].plots[$index].dataFun" type="label" class="form-control"  placeholder="Type function">
                                                    </div>
                                                    <div ng-class="{f:'tab-pane', d:'tab-pane active'}[plt.graphs[$parent.$index].plots[$index].plotDataType]">
                                                        <div class="row">
                                                            <div class="col-xs-7">
                                                                <select class="form-control" ng-model="plt.graphs[$parent.$index].plots[$index].dataFile" data-width="200px">
                                                                    <option ng-repeat="file in plt.files" value="{{file.name}}">{{file.name}}</option>
                                                                </select>
                                                            </div>

                                                            <div class="col-xs-1">
                                                                <button ng-click="plt.viewFile($parent.$index, $index)" type="button" class="btn btn-info" data-toggle="modal" data-target="#viewFile"><span class="glyphicon glyphicon-search"></span></button>
                                                            </div>



                                                                <div class="col-xs-4" placeholder="using">
                                                                    <input placeholder="using" ng-model="plt.graphs[$parent.$index].plots[$index].using" type="label" class="form-control">
                                                                </div>

                                                            <!---->

                                                              <!--  <div class="col-xs-4"  placeholder="using" data-placement="left" data-toggle="popover" data-trigger="focus" data-content="format: `a:b` <br/>a - column with x cords<br/>b - column with y cords">
                                                                    <div >
                                                                    </div>
                                                                </div>-->

                                                               <!-- <div class="col-xs-4" ng-if="plt.isPlot3u($parent.$index, $index) && plt.graphs[$parent.$index].graphType == '3D'" placeholder="using" data-placement="left" data-toggle="popover" data-trigger="focus" data-content="format: `a:b:c` <br/>a - column with x cords<br/>b - column with y cords<br/>c - column with z cords">
                                                                    <div >
                                                                        <input placeholder="using" ng-model="plt.graphs[$parent.$index].plots[$index].using" type="label" class="form-control">
                                                                    </div>
                                                                </div>

                                                                <div class="col-xs-4" ng-if="plt.isPlot3u($parent.$index, $index) && plt.graphs[$parent.$index].graphType == '2D'" placeholder="using" data-placement="left" data-toggle="popover" data-trigger="focus" data-content="format: `a:b:c` <br/>a - column with x cords<br/>b - column with y cords<br/>c - column with errors">
                                                                    <div >
                                                                        <input placeholder="using" ng-model="plt.graphs[$parent.$index].plots[$index].using" type="label" class="form-control">
                                                                    </div>
                                                                </div>

                                                                <div class="col-xs-4" ng-if="plt.isPlot4u($parent.$index, $index)" placeholder="using" data-placement="left" data-toggle="popover" data-trigger="focus" data-content="format: `a:b:c:d` <br/>a - column with x cords<br/>b - column with y cords<br/>c - column with x errors<br/>d - column with y errors">
                                                                    <div>
                                                                        <input placeholder="using" ng-model="plt.graphs[$parent.$index].plots[$index].using" type="label" class="form-control">
                                                                    </div>
                                                                </div>-->

                                                        </div>

                                                        <div  ng-show='plt.graphs[$parent.$index].plots[$index].dataFile == ""'>
                                                            <div class="alert alert-danger">
                                                                <strong>Invalid!</strong> Select a file! You want upload some files go to: <a href="@routes.AppController.filesPage">Files</a>. (Remember to save your project.)
                                                            </div>
                                                        </div>

                                                        <div  ng-show="plt.checkUsing($parent.$index, $index)">
                                                            <div class="alert alert-danger">
                                                                <strong>Invalid!</strong> Incorrect using command! <br>
                                                                {{plt.usingTipDescr}}
                                                            </div>
                                                        </div>

                                                        <!--<div ng-if="plt.isPlot2u($parent.$index, $index)" ng-show="!plt.matchedUsing2(plt.graphs[$parent.$index].plots[$index].using)">-->
                                                            <!--<div class="alert alert-danger">-->
                                                                <!--<strong>Invalid!</strong> Incorrect using command!-->
                                                            <!--</div>-->
                                                        <!--</div>-->

                                                        <!--<div ng-if="plt.isPlot3u($parent.$index, $index)" ng-show="!plt.matchedUsing3(plt.graphs[$parent.$index].plots[$index].using)">-->
                                                            <!--<div class="alert alert-danger">-->
                                                                <!--<strong>Invalid!</strong> Incorrect using command!-->
                                                            <!--</div>-->
                                                        <!--</div>-->

                                                        <!--<div ng-if="plt.isPlot4u($parent.$index, $index)" ng-show="!plt.matchedUsing4(plt.graphs[$parent.$index].plots[$index].using)">-->
                                                            <!--<div class="alert alert-danger">-->
                                                                <!--<strong>Invalid!</strong> Incorrect using command!-->
                                                            <!--</div>-->
                                                        <!--</div>-->

                                                    </div>
                                                </div>

                                                <br>

                                                <div class="container-fluid" ng-show="plt.graphs[$parent.$index].graphType == '2D' || plt.graphs[$parent.$index].graphType == '3D'">

                                                    <div ng-show="plt.graphs[$parent.$index].plots[$index].plotType == 'lines' || plt.graphs[$parent.$index].plots[$index].plotType == 'linespoints'">
                                                        <div class="row">
                                                            <div class="col-sm-4">
                                                                <select class="selectpicker"  ng-model="plt.graphs[$parent.$index].plots[$index].lineType" data-width="70px">
                                                                    <option data-content='<img src="@{routes.Assets.versioned("images/lines/line1.png")}">' >1</option>
                                                                    <option data-content='<img src="@{routes.Assets.versioned("images/lines/line2.png")}">' >2</option>
                                                                    <option data-content='<img src="@{routes.Assets.versioned("images/lines/line3.png")}">' >3</option>
                                                                    <option data-content='<img src="@{routes.Assets.versioned("images/lines/line4.png")}">' >4</option>
                                                                    <option data-content='<img src="@{routes.Assets.versioned("images/lines/line5.png")}">' >5</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-sm-3">
                                                                <p class="align-middle">width:</p>
                                                            </div>
                                                            <div class="col-sm-5">
                                                                <input type="text" ng-model="plt.graphs[$parent.$index].plots[$index].lineWidth" class="form-control" placeholder="size">
                                                            </div>
                                                        </div>

                                                        <div class="row" ng-show="!plt.checkLineWidth(plt.graphs[$parent.$index].plots[$index].lineWidth)">
                                                            <div class="alert alert-danger">
                                                                <strong>Invalid!</strong> Type only natural numbers.
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div ng-show="plt.graphs[$parent.$index].graphType == '2D' || plt.graphs[$parent.$index].graphType == '3D'">
                                                        <div ng-show="plt.graphs[$parent.$index].plots[$index].plotType == 'points' || plt.graphs[$parent.$index].plots[$index].plotType == 'linespoints'">
                                                            <div class="row">

                                                                <div class="col-sm-4">
                                                                    <select class="selectpicker" ng-model="plt.graphs[$parent.$index].plots[$index].pointType" data-width="70px">
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point2.png")}">' >1</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point3.png")}">' >2</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point4.png")}">' >3</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point5.png")}">' >4</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point1.png")}">' >5</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point6.png")}">' >6</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point7.png")}">' >7</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point8.png")}">' >8</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point9.png")}">' >9</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point10.png")}">' >10</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point11.png")}">' >11</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point12.png")}">' >12</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point13.png")}">' >13</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point14.png")}">' >14</option>
                                                                        <option data-content='<img src="@{routes.Assets.versioned("images/points/point15.png")}">' >15</option>
                                                                    </select>
                                                                </div>
                                                                <div class="col-sm-3">
                                                                    <p class="align-middle">width:</p>
                                                                </div>
                                                                <div class="col-sm-5">
                                                                    <input type="text" ng-model="plt.graphs[$parent.$index].plots[$index].pointSize" class="form-control" placeholder="size" id="pointWidth">
                                                                </div>

                                                            </div>

                                                            <div class="row" ng-show="!plt.checkPointSize(plt.graphs[$parent.$index].plots[$index].pointSize)">
                                                                <div class="alert alert-danger">
                                                                    <strong>Invalid!</strong> Type only positive numbers.
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div ng-show="plt.graphs[$parent.$index].plots[$index].plotType == 'filledcurve'">
                                                            <div class="row">
                                                                <div class="col-sm-2">
                                                                    <p class="align-middle">type:</p>
                                                                </div>
                                                                <div class="col-sm-3">
                                                                    <select class="selectpicker" ng-model="plt.graphs[$parent.$index].plots[$index].fillType" data-width="100px">
                                                                        <option  >x1</option>
                                                                        <option  >x2</option>
                                                                        <option  >y1</option>
                                                                        <option  >y2</option>
                                                                    </select>
                                                                </div>

                                                                <div class="col-sm-2">
                                                                    <p class="align-middle">fill:</p>
                                                                </div>
                                                                <div class="col-sm-3">
                                                                    <select class="selectpicker" ng-model="plt.graphs[$parent.$index].plots[$index].patternType" data-width="100px">
                                                                        <option>0</option>
                                                                        <option>1</option>
                                                                        <option>2</option>
                                                                        <option>3</option>
                                                                        <option>4</option>
                                                                        <option>5</option>
                                                                        <option>6</option>
                                                                        <option>7</option>
                                                                        <option>8</option>
                                                                        <option>9</option>
                                                                    </select>
                                                                </div>

                                                            </div>
                                                        </div>


                                                        <div class="row">
                                                            <div class="col-sm-12">
                                                                <div class="input-group" id="plotColor">
                                                                    <input colorpicker="rgb" colorpicker-parent="true" colorpicker-position="right" type="text" ng-model="plt.graphs[$parent.$index].plots[$index].color" class="form-control" />
                                                            <span class="input-group-addon" >
                                                                <svg width="40" height="18">
                                                                    <rect width="40" height="18" style="fill:{{plt.graphs[$parent.$index].plots[$index].color}}" />
                                                                </svg>
                                                            </span>
                                                                </div>
                                                            </div>
                                                        </div>



                                                    </div>

                                                    <br>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-show="plt.graphs[$parent.$index].graphType == 'HIST'">
                                            <div class="panel panel-default">
                                                <div class="container-fluid">
                                                    <br>
                                                    <div class="row">
                                                        <div class="col-xs-7">
                                                            <select class="form-control" ng-model="plt.graphs[$parent.$index].plots[$index].dataFile" data-width="200px">
                                                                <option ng-repeat="file in plt.files" value="{{file.name}}">{{file.name}}</option>
                                                            </select>
                                                            <!--<select class="selectpicker"  ng-model="plt.graphs[$parent.$index].plots[$index].dataFile" data-width="200px">-->
                                                                <!--<option ng-repeat="file in plt.files">{{file.name}}</option>-->
                                                            <!--</select>-->
                                                        </div>

                                                        <div class="col-xs-1">
                                                            <button ng-click="plt.viewFile($parent.$index, $index)" type="button" class="btn btn-info" data-toggle="modal" data-target="#viewFile"><span class="glyphicon glyphicon-search"></span></button>
                                                        </div>

                                                        <!--<div class="col-xs-4">-->
                                                            <!--<input ng-model="plt.graphs[$parent.$index].plots[$index].using" type="label" class="form-control"  placeholder="using" data-toggle="popover" data-trigger="focus" data-content="Click anywhere in the document to close this popover">-->
                                                        <!--</div>-->

                                                        <div class="col-xs-4"  data-placement="left" data-toggle="popover" data-trigger="focus" data-content="format: `a` <br/>a - column with data (greater than 1)">
                                                            <div >
                                                                <input placeholder="using" ng-model="plt.graphs[$parent.$index].plots[$index].using" type="label" class="form-control">
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div ng-show="!plt.matchedNatural(plt.graphs[$parent.$index].plots[$index].using, 2, 999)">
                                                        <div class="alert alert-danger">
                                                            <strong>Invalid!</strong> Incorrect using command!
                                                        </div>
                                                    </div>



                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            <div class="input-group">
                                                                <input colorpicker="rgb" colorpicker-parent="true" colorpicker-position="right" type="text" ng-model="plt.graphs[$parent.$index].plots[$index].color" class="form-control" />
                                                            <span class="input-group-addon" >
                                                                <svg width="40" height="18">
                                                                    <rect width="40" height="18" style="fill:{{plt.graphs[$parent.$index].plots[$index].color}}" />
                                                                </svg>
                                                            </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <br>
                                                </div>
                                            </div>
                                        </div>

                                    </div>


                                </div>

                            </div>

                        </div>

                        <div class="col-sm-6">
                            <div class="btn-group btn-group-justified">
                                <div class="btn-group">
                                    <button ng-click="plt.newGraph()" type="button" class="btn btn-primary btn-block">New Graph</button>
                                </div>
                                <div class="btn-group">
                                    <button ng-click="plt.removeGraph($index)" type="button" class="btn btn-primary btn-block">Remove Graph</button>
                                </div>
                                <!--<div class="btn-group">-->
                                    <!--<button ng-click="" type="button" class="btn btn-primary btn-block" data-toggle="modal" data-target="#saveAsProject">Save as...</button>-->
                                <!--</div>-->
                            </div>
                            <div class="well full-page">
                                <canvas id="plot-svg-{{$index}}">
                                </canvas>
                            </div>

                        </div>

                        <div class="col-sm-3">
                            <button ng-click="plt.drawGraph($index)" type="button" class="btn btn-primary btn-block">Refresh</button>
                            <div class="well full-page">

                                <ul class="nav nav-pills nav-justified">
                                    <li ng-class="plt.graphs[$index].graphType == '2D' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changeGraphType($index, '2D')" >2D</a></li>
                                    <li ng-class="plt.graphs[$index].graphType == '3D' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changeGraphType($index, '3D')" >3D</a></li>
                                    <li ng-class="plt.graphs[$index].graphType == 'HIST' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changeGraphType($index, 'HIST')" >HIST</a></li>
                                    <li ng-class="plt.graphs[$index].graphType == 'CONT' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changeGraphType($index, 'CONT')" >CONT</a></li>
                                    <li ng-class="plt.graphs[$index].graphType == 'PM3D' ? 'active' : '' " ><a data-toggle="pill" ng-click="plt.changeGraphType($index, 'PM3D')" >PM3D</a></li>
                                </ul>

                                <!--<button type="button" class="btn btn-primary btn-sm" ng-click="plt.changeIs3D($index)"> {{ plt.graphs[$index].is3D ? '3D' : '2D' }} </button>-->
                                <input type="text" class="form-control"  ng-model="plt.graphs[$index].title" placeholder="Title">
                                <br>

                                <div ng-show="plt.graphs[$index].graphType != 'HIST'">
                                    @views.html.tags.axisDescription("x")
                                    @views.html.tags.axisDescription("y")
                                    <div ng-show="plt.graphs[$index].graphType != '2D'">
                                        @views.html.tags.axisDescription("z")
                                    </div>
                                    <hr>
                                </div>

                                <form class="form-horizontal" role="form">

                                    <div ng-show="plt.graphs[$index].graphType != 'HIST'">
                                        <div class="form-group">
                                            <label class="col-sm-5  control-label">Samples x:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control input-sm" ng-model="plt.graphs[$index].samples.samplesX"  type="text" value="10">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedNatural(plt.graphs[$index].samples.samplesX, 2, 200)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only natural numbers from 2 to 200.
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">Samples y:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control input-sm" ng-model="plt.graphs[$index].samples.samplesY" type="text" value="10">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedNatural(plt.graphs[$index].samples.samplesY, 2, 200)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only natural numbers from 2 to 200.
                                            </div>
                                        </div>

                                        <div ng-show="plt.graphs[$index].graphType != '2D'">
                                            <div class="form-group">
                                                <label class="col-sm-5 control-label">Samples z:</label>
                                                <div class="col-sm-7">
                                                    <input class="form-control input-sm" ng-model="plt.graphs[$index].samples.samplesZ"  type="text" value="10">
                                                </div>
                                            </div>

                                            <div ng-show="!plt.matchedNatural(plt.graphs[$index].samples.samplesZ, 2, 200)">
                                                <div class="alert alert-danger">
                                                    <strong>Invalid!</strong> Type only natural numbers from 2 to 200.
                                                </div>
                                            </div>
                                        </div>

                                        <hr>
                                    </div>

                                    <div ng-show="plt.graphs[$index].graphType == '3D'">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">View x:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control input-sm" ng-model="plt.graphs[$index].view.viewX" type="text" value="10">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedNatural(plt.graphs[$index].view.viewX, 0, 360)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only natural numbers from 0 to 360.
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">View y:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control input-sm" ng-model="plt.graphs[$index].view.viewY" type="text" value="10">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedNatural(plt.graphs[$index].view.viewY, 0, 360)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only natural numbers from 0 to 360.
                                            </div>
                                        </div>

                                        <hr>
                                    </div>


                                    <div class="form-group">
                                        <label class="col-sm-5 control-label">Grid:</label>
                                        <div class="col-sm-7">
                                            <select class="selectpicker" ng-model="plt.graphs[$index].grid.gridType" data-width="140px">
                                                <option >x</option>
                                                <option >y</option>
                                                <option >x y</option>
                                                <option >None</option>
                                            </select>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <label class="col-sm-5 control-label">Width:</label>
                                        <div class="col-sm-7">
                                            <input class="form-control input-sm" ng-model="plt.graphs[$index].grid.gridWidth" type="text" value="0.5">
                                        </div>
                                    </div>

                                    <div ng-show="!plt.matchedReal(plt.graphs[$index].grid.gridWidth, 0.0, 100.0)">
                                        <div class="alert alert-danger">
                                            <strong>Invalid!</strong> Type only real numbers from 0.0 to 100.0.
                                        </div>
                                    </div>

                                    <hr>

                                    <label for="legend-div">Legend:</label>
                                    <div id="legend-div">
                                        <select class="selectpicker" ng-model="plt.graphs[$index].legend.isUsed" data-width="70px">
                                            <option>on</option>
                                            <option>off</option>
                                        </select>
                                        <select class="selectpicker" ng-model="plt.graphs[$index].legend.place" data-width="100px">
                                            <option>outside</option>
                                            <option>inside</option>
                                        </select>
                                        <select class="selectpicker" ng-model="plt.graphs[$index].legend.horiPos" data-width="100px">
                                            <option>left</option>
                                            <option>right</option>
                                            <option>center</option>
                                        </select>
                                        <select class="selectpicker" ng-model="plt.graphs[$index].legend.vertPos" data-width="100px">
                                            <option>top</option>
                                            <option>bottom</option>
                                            <option>center</option>
                                        </select>
                                        <select class="selectpicker" ng-model="plt.graphs[$index].legend.adjust" data-width="120px">
                                            <option>vertical</option>
                                            <option>horizontal</option>
                                        </select>
                                        <select class="selectpicker" ng-model="plt.graphs[$index].legend.box" data-width="100px">
                                            <option>box</option>
                                            <option>nobox</option>
                                        </select>
                                    </div>

                                    <hr>

                                    <div ng-show="plt.graphs[$index].graphType == 'CONT'">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">Contour font size:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control input-sm" ng-model="plt.graphs[$index].contourFontSize" type="text" value="0.5">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedReal(plt.graphs[$index].contourFontSize, 0.0, 100.0)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only real numbers from 0.0 to 100.0.
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">Contour levels:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control input-sm" ng-model="plt.graphs[$index].contourLevels"  type="text" value="20">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedNatural(plt.graphs[$index].contourLevels, 2, 50)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only natural numbers from 2 to 50.
                                            </div>
                                        </div>

                                        <hr>
                                    </div>

                                    <div ng-show="plt.graphs[$index].graphType == 'HIST'">
                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">Type:</label>
                                            <select class="selectpicker" ng-model="plt.graphs[$index].histogramType" data-width="80px">
                                                <option>row</option>
                                                <option>cluster</option>
                                            </select>
                                        </div>


                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">Gap:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control input-sm" ng-model="plt.graphs[$index].histogramGap"  type="text" value="1">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedReal(plt.graphs[$index].histogramGap, 0.0, 10.0)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only real numbers from 0.0 to 10.0.
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">Box width:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control input-sm" ng-model="plt.graphs[$index].histogramBoxWidth" type="text" value="1">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedReal(plt.graphs[$index].histogramBoxWidth, 0.0, 1.0)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only real numbers from 0.0 to 1.0.
                                            </div>
                                        </div>


                                        <label class="col-sm-5 control-label">Border:</label>
                                        <select class="selectpicker" ng-model="plt.graphs[$index].histogramBorder.type[0]" data-width="80px">
                                            <option>empty</option>
                                            <option>solid</option>
                                        </select>
                                        <select class="selectpicker" ng-model="plt.graphs[$index].histogramBorder.type[1]" data-width="80px">
                                            <option>border</option>
                                            <option>noborder</option>
                                        </select>

                                        <label class="control-label">Border color:</label>
                                        <div class="row">
                                            <div class=col-sm-12">
                                                <div class="input-group">
                                                    <input colorpicker="rgb" colorpicker-parent="true" colorpicker-position="right" type="text" ng-model="plt.graphs[$index].histogramBorder.color" class="form-control" />
                                            <span class="input-group-addon" >
                                                <svg width="40" height="18">
                                                    <rect width="40" height="18" style="fill:{{plt.graphs[$index].histogramBorder.color}}" />
                                                </svg>
                                            </span>
                                                </div>
                                            </div>
                                        </div>

                                        <hr>
                                    </div>

                                    <div ng-show="plt.graphs[$index].graphType == 'PM3D'">
                                        <label class="control-label">Palette:</label>
                                        <div class="row">
                                            <div class="col-sm-8">
                                                <svg width="200" height="30">
                                                    <defs>
                                                        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                                                            <stop ng-repeat="idx in plt.getNumber(plt.graphs[$index].palette.length)" offset="{{($index)*(100.0/(plt.graphs[$parent.$index].palette.length - 1))}}%" style="stop-color:{{plt.graphs[$parent.$index].palette[$index]}};stop-opacity:1" />
                                                        </linearGradient>
                                                    </defs>

                                                    <rect width="200" height="30" fill="url(#grad1)" />
                                                </svg>
                                            </div>
                                            <div class="col-sm-4">
                                                <button class="btn btn-primary btn-sm" ng-click="plt.addColor($index)">Add Color</button>
                                            </div>
                                        </div>

                                        <div ng-repeat="color in plt.getNumber(plt.graphs[$index].palette.length)">
                                            <div class="row">
                                                <div class="col-sm-10">
                                                    <div class="input-group">
                                                        <input colorpicker="rgb" colorpicker-parent="true" colorpicker-position="right" type="text" ng-model="plt.graphs[$parent.$index].palette[$index]" class="form-control" />
                                            <span class="input-group-addon" >
                                                <svg width="40" height="18">
                                                    <rect width="40" height="18" style="fill:{{plt.graphs[$parent.$index].palette[$index]}}" />
                                                </svg>
                                            </span>
                                                    </div>
                                                </div>
                                                <div class="col-sm-2">
                                                    <button class="btn btn-danger btn-sm" ng-click="plt.removeColor($parent.$index, $index)">
                                                        <span class="glyphicon glyphicon-remove"></span>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <hr>
                                    </div>

                                </form>
                            </div>

                        </div>
            </div>

            <div id="layout" class="tab-pane fade">
                <div class="row" style="width: 100%;margin: 0px; max-height: 50px;">

                    <div id="" class="text-center">
                            <ul id="page-pagination"  ng-model="plt.selectedPage" class="nav pagination pagination-sm">
                                <li ng-repeat="page in plt.project.pages" ng-click="plt.calculatePageEvent($index)"><a data-toggle="tab" href="#tab-page{{$index}}">Page {{$index + 1}}</a></li>
                            </ul>
                    </div>
                </div>

                <div class="tab-content">

                    <div ng-repeat="page in plt.project.pages" id="tab-page{{$index}}" class="tab-pane fade in {{$index == 0 ? 'active' : ''}}">

                        <div id="layout-page" class="layout-page">

                            <div class="col-sm-3">
                                <div class="btn-group btn-group-justified">
                                    <!--<div class="btn-group">-->
                                        <!--<button class="btn btn-primary btn-block" ng-click="plt.clearGraphRefs($index)">Reset graphs</button>-->
                                    <!--</div>-->
                                    <div class="btn-group">
                                        <button class="btn btn-primary btn-block" ng-click="plt.newPage()">New Page</button>
                                    </div>
                                    <div class="btn-group">
                                        <button class="btn btn-primary btn-block" ng-click="plt.deletePage($index)">Delete Page</button>
                                    </div>
                                </div>
                                <div id="page-drops-{{$index}}" class="well full-page3">
                                    <div id="origin{{$index}}" class="origin"></div>
                                    <div  class="draggable draggable{{$parent.$index}}" ng-repeat="graph in plt.graphs">
                                        <p>{{$index + 1}}</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6">
                                <div id="page-{{$index}}" class="full-page2" style="margin: 0px;">
                                    <div id="page-in-{{$index}}" class="dropzone">

                                    </div>
                                </div>

                            </div>

                            <div class="col-sm-3">
                                <button class="btn btn-primary btn-block" ng-click="plt.generateProject()">Generate project</button>
                                <div class="well full-page3">
                                    <form class="form-horizontal" role="form">
                                        <div class="form-group">
                                            <!--<label class="col-sm-5 control-label">Project:</label>-->
                                            <!--<div class="col-sm-7">-->
                                                <!--<input class="form-control" ng-model="plt.project.name" type="text" placeholder="Type project name">-->
                                            <!--</div>-->
                                            <label class="col-sm-5 control-label">Title:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control" ng-model="plt.project.pages[$index].title" type="text" placeholder="Type title">
                                            </div>
                                            <label class="col-sm-5 control-label">Title size:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control" ng-model="plt.project.pages[$index].titleSize" type="text" placeholder="Type title size">
                                            </div>

                                        </div>

                                        <div ng-show="!plt.matchedNatural(plt.project.pages[$index].titleSize, 1, 9999)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only natural numbers, greater than 0.
                                            </div>
                                        </div>

                                        <hr>

                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">Font:</label>
                                            <div class="col-sm-7">
                                                <select class="selectpicker" ng-model="plt.project.pages[$index].font.name" data-width="150px">
                                                    <option>Cambria</option>
                                                    <option>Arial</option>
                                                </select>
                                            </div>
                                            <label class="col-sm-5 control-label">Font size:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control" ng-model="plt.project.pages[$index].font.size" type="text" placeholder="Type font size">
                                            </div>
                                        </div>

                                        <div ng-show="!plt.matchedNatural(plt.project.pages[$index].font.size, 1, 9999)">
                                            <div class="alert alert-danger">
                                                <strong>Invalid!</strong> Type only natural numbers, greater than 0.
                                            </div>
                                        </div>

                                        <hr>

                                        <div class="form-group">
                                            <label class="col-sm-5 control-label">Width:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control" ng-model="plt.project.pages[$index].width" type="text" placeholder="Type width in px">
                                            </div>

                                            <div ng-show="!plt.matchedNatural(plt.project.pages[$index].width, 1, 9999)">
                                                <div class="alert alert-danger">
                                                    <strong>Invalid!</strong> Type only natural numbers, greater than 0.
                                                </div>
                                            </div>

                                            <label class="col-sm-5 control-label">Height:</label>
                                            <div class="col-sm-7">
                                                <input class="form-control" ng-model="plt.project.pages[$index].height" type="text" placeholder="Type heigth in px">
                                            </div>

                                            <div ng-show="!plt.matchedNatural(plt.project.pages[$index].height, 1, 9999)">
                                                <div class="alert alert-danger">
                                                    <strong>Invalid!</strong> Type only natural numbers, greater than 0.
                                                </div>
                                            </div>

                                            <label class="col-sm-5 control-label">Format:</label>
                                            <div class="col-sm-7">
                                                <select class="selectpicker" ng-model="plt.project.pages[$index].terminal" data-width="150px">
                                                    <option>svg</option>
                                                    <option>png</option>
                                                    <option>pdf</option>
                                                    <option>eps</option>
                                                </select>
                                            </div>
                                        </div>


                                        
                                        <button id="calculateBtn-{{$index}}" ng-click="plt.calculatePage($index)" class="btn btn-primary btn-block">Recalculate</button>

                                        <button ng-click="plt.clearGraphRefs($index)" class="btn btn-primary btn-block">Reset</button>

                                        <button ng-click="plt.defaultLayout()" class="btn btn-primary btn-block">Add default pages</button>

                                    </form>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>

        <div id="pagination" class="text-center" hidden>
            <ul id="plot-pagination"  ng-model="plt.currentGraph" class="nav pagination pagination-lg">
                <li ng-repeat="n in plt.graphs" ><a data-toggle="tab" href="#tab-{{$index}}">{{$index + 1}}</a></li>
                <li><a data-toggle="tab" href="#layout" ng-click="plt.calculateAllPages()" ng-hide="plt.project == undefined">Layout</a></li>
            </ul>
        </div>

    </div>

    <!-- for downloading files-->
    <a href='/getProject/' id="download" hidden>link</a>

    <div id="debug" hidden="true">
    <!--<div id="debug">-->
        <h5>Debug:</h5>
        <div ng-repeat="graph in plt.graphs">
            <p>{{$index}}</p>
            <p>title: {{ graph.title }}</p>
            <p>is3D: {{ graph.is3D }}</p>
            <p>xLabel: {{ graph.xLabel }}</p>
            <p>xFrom: {{ graph.xFrom }}</p>
            <p>xTo: {{ graph.xTo }}</p>
            <p>xIsLog: {{ graph.xIsLog }}</p>
            <p>yLabel: {{ graph.yLabel }}</p>
            <p>yFrom: {{ graph.yFrom }}</p>
            <p>yTo: {{ graph.yTo }}</p>
            <p>yIsLog: {{ graph.yIsLog }}</p>
            <p>zLabel: {{ graph.zLabel }}</p>
            <p>zFrom: {{ graph.zFrom }}</p>
            <p>zTo: {{ graph.zTo }}</p>
            <p>zIsLog: {{ graph.zIsLog }}</p>
            <p>plots:</p>
            <ul ng-repeat="plot in graph.plots">
                <li>
                    <p>{{$index}}</p>
                    <p id="{{$index}}">label: {{ plot.label }}</p>
                    <p>type: {{ plot.plotType }}</p>
                    <p>dataFun: {{ plot.dataFun }}</p>
                    <p>dataSet: {{ plot.dataSet }}</p>
                    <p>isLines: {{ plot.isLines }}</p>
                    <p>lineType: {{ plot.lineType }}</p>
                    <p>lineWidth: {{ plot.lineWidth }}</p>
                    <p>isPoints: {{ plot.isPoints }}</p>
                    <p>pointType: {{ plot.pointType }}</p>
                    <p>pointSize: {{ plot.pointSize }}</p>
                    <p>color: {{ plot.color }}</p>
                </li>
            </ul>
        </div>

    </div>

     <!--Modal-->
    <div id="viewFile" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">File: {{plt.modalFileView.name}}</h4>
                    <h4 class="modal-title">Size: {{plt.modalFileView.size}}</h4>
                </div>
                <div class="modal-body">
                    <textarea class="form-control" rows="15" readonly>{{plt.modalFileView.dataHead}}</textarea>
                </div>
            </div>

        </div>
    </div>


    <!--Modal-->
    <div id="newProject" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Type project name:</h4>
                </div>
                <div class="modal-body">
                    <div class="row" ng-show="!plt.validProjectName()">
                        <div class="alert alert-danger">
                            <strong>Invalid!</strong> Project {{newProjectName}} already exists or empty name!
                        </div>
                    </div>
                    <input class="form-control" ng-model="plt.newProjectName" type="text" placeholder="title">
                </div>
                <div class="modal-footer">
                    <button ng-show="plt.validProjectName()" ng-click="plt.confirmProjectName()" type="button" class="btn btn-default" data-dismiss="modal">Confirm</button>
                </div>
            </div>

        </div>
    </div>

    <!--Modal-->
    <div id="deleteProject" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Are you sure?</h4>
                </div>
                <div class="modal-body">
                    <p>Your project will be removed completely.</p>
                </div>
                <div class="modal-footer">
                    <button ng-click="plt.removeProject()" type="button" class="btn btn-default" data-dismiss="modal">Remove project</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                </div>
            </div>

        </div>
    </div>

    <!--&lt;!&ndash;Modal&ndash;&gt;-->
    <!--<div id="saveAsProject" class="modal fade" role="dialog">-->
        <!--<div class="modal-dialog">-->

            <!--&lt;!&ndash; Modal content&ndash;&gt;-->
            <!--<div class="modal-content">-->
                <!--<div class="modal-header">-->
                    <!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
                    <!--<h4 class="modal-title">Choose output type:</h4>-->
                <!--</div>-->
                <!--<div class="modal-body">-->
                    <!--<div class="row" ng-show="!plt.checkLineWidth(plt.saveAsWidth)">-->
                        <!--<div class="alert alert-danger">-->
                            <!--<strong>Invalid!</strong> Width must be whole number greather than 0-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="form-group">-->
                        <!--<label>Width [px]:</label>-->
                        <!--<input type="text" class="form-control" ng-model="plt.saveAsWidth">-->
                    <!--</div>-->
                    <!--<div class="row" ng-show="!plt.checkLineWidth(plt.saveAsHeight)">-->
                        <!--<div class="alert alert-danger">-->
                            <!--<strong>Invalid!</strong> Height must be whole number greather than 0-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="form-group">-->
                        <!--<label>Height [px]:</label>-->
                        <!--<input type="text" class="form-control" ng-model="plt.saveAsHeight">-->
                    <!--</div>-->
                    <!--<button ng-disabled="!plt.checkLineWidth(plt.saveAsWidth) || !plt.checkLineWidth(plt.saveAsHeight)" class="btn btn-default " ng-click="plt.saveAs($index, 'pdf')">PDF</button>-->
                    <!--<button ng-disabled="!plt.checkLineWidth(plt.saveAsWidth) || !plt.checkLineWidth(plt.saveAsHeight)" class="btn btn-default " ng-click="plt.saveAs($index, 'svg')">SVG</button>-->
                    <!--<button ng-disabled="!plt.checkLineWidth(plt.saveAsWidth) || !plt.checkLineWidth(plt.saveAsHeight)" class="btn btn-default " ng-click="plt.saveAs($index, 'eps')">EPS</button>-->
                    <!--<button ng-disabled="!plt.checkLineWidth(plt.saveAsWidth) || !plt.checkLineWidth(plt.saveAsHeight)" class="btn btn-default " ng-click="plt.saveAs($index, 'png')">PNG</button>-->
                <!--</div>-->
            <!--</div>-->

        <!--</div>-->
    <!--</div>-->


</div>



}
